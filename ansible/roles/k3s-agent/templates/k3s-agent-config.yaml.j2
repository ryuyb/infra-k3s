# K3s agent configuration
# https://docs.k3s.io/installation/configuration

# Connect to k3s server via Tailscale
server: {{ k3s_server_url }}
token: {{ k3s_token }}

# Tailscale VPN integration (official, requires K3s v1.27.3+)
vpn-auth: "name=tailscale,joinKey={{ tailscale_authkey }}"
node-external-ip: {{ tailscale_ip }}

# Node labels for scheduling
node-label:
{% for label in k3s_node_labels %}
  - {{ label }}
{% endfor %}
